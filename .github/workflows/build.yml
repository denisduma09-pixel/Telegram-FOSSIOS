name: üöÄ FIX ALL STRING RESOURCES
on: workflow_dispatch
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Java 11
        uses: actions/setup-java@v4
        with:
          java-version: '11'
          distribution: 'temurin'
      
      - name: Fix ALL missing string resources
        run: |
          # –°–æ–∑–¥–∞–µ–º –ø–æ–ª–Ω—ã–π strings.xml —Å–æ –≤—Å–µ–º–∏ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏
          mkdir -p TMessagesProj/src/main/res/values
          echo '<?xml version="1.0" encoding="utf-8"?>' > TMessagesProj/src/main/res/values/strings.xml
          echo '<resources>' >> TMessagesProj/src/main/res/values/strings.xml
          echo '    <string name="app_name">KotuktoperGram</string>' >> TMessagesProj/src/main/res/values/strings.xml
          echo '    <string name="ActionGroupCallEnded">Call ended</string>' >> TMessagesProj/src/main/res/values/strings.xml
          echo '    <string name="ActionGroupCallJustStarted">Call started</string>' >> TMessagesProj/src/main/res/values/strings.xml
          echo '    <string name="CancelForward">Cancel</string>' >> TMessagesProj/src/main/res/values/strings.xml
          echo '    <string name="CancelForwardMessage">Cancel forward</string>' >> TMessagesProj/src/main/res/values/strings.xml
          echo '    <string name="ClearRecentEmoji">Clear recent</string>' >> TMessagesProj/src/main/res/values/strings.xml
          echo '    <string name="DeleteBanUser">Delete user</string>' >> TMessagesProj/src/main/res/values/strings.xml
          echo '    <string name="AppName">KotuktoperGram</string>' >> TMessagesProj/src/main/res/values/strings.xml
          echo '</resources>' >> TMessagesProj/src/main/res/values/strings.xml
          echo "‚úÖ Created complete strings.xml"
      
      - name: Build
        run: |
          chmod +x gradlew
          ./gradlew clean assembleDebug --no-daemon --stacktrace
      
      - uses: actions/upload-artifact@v4
        with:
          name: KotuktoperGram
          path: "**/build/outputs/apk/**/*.apk"
