android {
    compileSdkVersion 33
    buildToolsVersion '33.0.0'
    ndkVersion "25.1.8937393"

    sourceSets.main.jniLibs.srcDirs = ['./jni/']

    externalNativeBuild {
        cmake {
            path 'jni/CMakeLists.txt'
            version "3.22.1"
        }
    }

    lintOptions {
        disable 'MissingTranslation'
        disable 'ExtraTranslation'
        disable 'BlockedPrivateApi'
        abortOnError false
    }

    dexOptions {
        jumboMode = true
        javaMaxHeapSize "4g"
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
        coreLibraryDesugaringEnabled true
    }

    packagingOptions {
        resources {
            excludes += [
                '**/**.version',
                '**/**.properties',
                'META-INF/DEPENDENCIES',
                'META-INF/NOTICE',
                'META-INF/LICENSE',
                'META-INF/LICENSE.txt',
                'META-INF/NOTICE.txt'
            ]
        }
    }

    defaultConfig {
        // üî• –í–ï–†–°–ò–Ø –î–õ–Ø KOTUKTOPERGRAM iOS26
        versionCode 26001
        versionName "iOS26.1.0"
        
        minSdkVersion 23
        targetSdkVersion 33
        compileSdkVersion 33

        multiDexEnabled true
        
        // üé® –£–Ω–∏–∫–∞–ª—å–Ω—ã–π package name
        applicationId "org.kotuktoper.ios26"
        
        // üì± –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä
        ndk {
            abiFilters "arm64-v8a", "x86_64"
        }

        // üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
        renderscriptTargetApi 33
        renderscriptSupportModeEnabled true
    }

    // üèóÔ∏è –¢–∏–ø—ã —Å–±–æ—Ä–æ–∫
    buildTypes {
        debug {
            debuggable true
            jniDebuggable true
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
            
            // üéØ –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
            buildConfigField "boolean", "DEBUG_MODE", "true"
            resValue "string", "app_name", "KotuktoperGram iOS26 Debug"
        }
        
        release {
            minifyEnabled true
            shrinkResources true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
            
            // üöÄ –ü—Ä–æ–¥–∞–∫—à–µ–Ω –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            buildConfigField "boolean", "DEBUG_MODE", "false"
            resValue "string", "app_name", "KotuktoperGram iOS26"
        }
    }

    // ‚ö° –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–±–æ—Ä–∫–∏
    buildFeatures {
        buildConfig true
        viewBinding true
    }
}

// üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è iOS26 —Å—Ç–∏–ª—è
dependencies {
    coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:2.0.3'
    
    // üé® –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI (–¥–ª—è iOS26 —ç—Ñ—Ñ–µ–∫—Ç–æ–≤)
    implementation 'androidx.core:core-ktx:1.10.1'
    implementation 'androidx.palette:palette-ktx:1.0.0'
    
    // ‚ú® –ê–Ω–∏–º–∞—Ü–∏–∏ (–¥–ª—è Dynamic Island)
    implementation 'com.airbnb.android:lottie:6.1.0'
    
    // üéØ –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å
    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.7.3'
}

// üöÄ –£—Å–∫–æ—Ä–µ–Ω–∏–µ Gradle
tasks.withType(JavaCompile) {
    options.compilerArgs += [
        '-Xlint:unchecked',
        '-Xlint:deprecation'
    ]
    options.incremental = true
}
